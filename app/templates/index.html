<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa com Ponto Dinâmico</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <h1>Mapa com Ponto Dinâmico</h1>
    <div class="map">
        <img src="{{ url_for('static', filename='mapa.png') }}" alt="Mapa">
        <img id="punto-semaforo" class="semaforo" src="{{ url_for('static', filename='punto-gris.png') }}" alt="Semáforo">
    </div>

    <script>
        const semaforo = document.getElementById("punto-semaforo");

        function atualizarPonto() {
            fetch("/api/punto_rojo")
                .then(response => response.json())
                .then(data => {
                    semaforo.style.left = data.left;
                    semaforo.style.top = data.top;

                    // Cambiar la imagen dinámicamente según el color
                    if (data.color === "rojo") {
                        semaforo.src = "/static/punto-rojo.png";
                    } else if (data.color === "verde") {
                        semaforo.src = "/static/punto-verde.png";
                    }
                    else {
                        semaforo.src = "/static/punto-gris.png";
                    }
                });
        }

        atualizarPonto(); // Al cargar
        setInterval(atualizarPonto, 5000); // A cada 5 segundos
    </script>
</body>
</html>
